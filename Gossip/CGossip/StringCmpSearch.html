<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<!-- Mirrored from openhome.cc/Gossip/CGossip/StringCmpSearch.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:08:06 GMT -->
<head>












  
  
  
  
  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">












  
  
  
  
  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">












  
  
  
  
  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type">











  
  
  
  
  
  
  
  
  
  
  
  <title>字串比較、搜尋</title>
</head>


<body>












<h3><a href="../index.html">From
Gossip@Openhome</a></h3>












<h1><a href="index.html">C&nbsp;Gossip: 字串比較、搜尋</a></h1>












<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">












  <tbody>












    <tr>












      <td style="width: 676px; vertical-align: top;"> <small>若要進行字串的比較，可以使用strcmp()或strncmp()：<br>




      </small>
      
      
      
      
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">int strcmp(const char*, const char*);<br>




int strncmp(const char*, const char*, size_t);<br>




      <br>




      </span></small></div>




      <small>
strcmp(str1,
str2)會比較字串str1與str2的大小，若相同就傳回0，str1大於str2則傳回大於0的值，小於則傳回小於0的值，比較的標準是依字典順序
比對，例如若str1大於str2，表示str1在字典中的順序是在str2之後。strncmp()則是比較兩個字串中指定的字元數目是否相同，一個字串比較範例如下所示：<br>




      </small>
      
      
      
      
      <pre>#include &lt;stdio.h&gt; <br>#include &lt;stdlib.h&gt;<br>#include &lt;string.h&gt;<br>                                                                                <br>int main(int argc, char* argv[]) {<br>    char passwd[] = "123456";<br>    char input[7];<br>	<br>    printf("請輸入密碼：");<br>    gets(input);<br>	<br>    if(strcmp(passwd, input) == 0) {<br>        puts("密碼正確");<br>    }<br>    else {<br>        puts("密碼錯誤");<br>    }<br>	<br>    return 0; <br>}</pre>




      <small><br>




&nbsp;</small><small><span class="postbody">
執行結果：</span></small><br>








      
      
      
      
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">








        <tbody>








          <tr>








            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">請輸入密碼：123456<br>




密碼正確</span></small><span style="color: rgb(255, 255, 255);"><br>








            </span></td>








          </tr>








        
        
        
        
        
        
        
        </tbody>
      
      
      
      
      
      
      
      </table>








      <br>



      <small>C標準函式庫也提供了搜尋字串的相關函式，先來看到strstr()函式：<br>



      </small>
      
      
      
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">char* strstr(const char*, const char*);</span></small><br>



      </div>











      <span class="postbody"><br>



      <small>第一個參數是被搜尋字串，第二個參數是想要搜尋的子字串，如果沒找到子字串則傳回NULL，如果搜尋到第一個符合的子字串，則
傳回符合位置的指標，若想要得知子字串是在哪一個索引位置，則可以利用該指標減去字串（字元陣列）開頭的指標，得到的位移量即為符合的索引位置，一個範例
如下所示：<br>



      </small></span><span class="postbody"></span>
      
      
      
      <pre>#include &lt;stdio.h&gt; <br>#include &lt;stdlib.h&gt;<br>#include &lt;string.h&gt;<br><br>int main(int argc, char* argv[]) {<br>    char source[80];<br>    char search[80];<br>    char *loc;<br>	<br>    printf("輸入字串：");<br>    gets(source);<br>	<br>    printf("搜尋子字串：");<br>    gets(search);<br>	<br>    loc = strstr(source, search);<br>	<br>    if(loc == NULL) {<br>        printf("找不到符合的子字串\n");<br>    }<br>    else {<br>        printf("在索引位置 %d 處找到子字串\n", loc - source);<br>    }<br>	<br>    return 0; <br>}</pre>



      <span class="postbody"><br>



      <small>執行結果：</small></span><br>








      
      
      
      
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">








        <tbody>








          <tr>








            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">輸入字串：How do you do?<br>



搜尋子字串：you<br>



在索引位置 7 處找到子字串</span></small><span style="color: rgb(255, 255, 255);"><br>








            </span></td>








          </tr>








        
        
        
        
        
        
        
        </tbody>
      
      
      
      
      
      
      
      </table>








      <br>



      <span class="postbody"><small>相對於strstr()函式找出符合的子字串，strspn()函式則用來比較兩個字串，找出兩個字串中開始不匹配的地方：<br>


      </small></span>
      
      
      <div style="margin-left: 40px;"><span style="font-family: Courier New,Courier,monospace;" class="postbody"><small><span style="font-weight: bold;">size_t strspn(const char*, const char*);</span></small></span><br>


      <span class="postbody"></span></div>


      <span class="postbody"><br>


      <small>strspn()會傳回兩個字串開始不匹配的第一個字元索引位置，否則傳回0，一個使用範例如下：<br>


      </small></span><span class="postbody"></span>
      
      
      <pre>#include &lt;stdio.h&gt; <br>#include &lt;stdlib.h&gt;<br>#include &lt;string.h&gt;<br><br>int main(int argc, char* argv[]) {<br>    char str1[80];<br>    char str2[80];<br>    size_t loc;<br>	<br>    printf("輸入字串：");<br>    gets(str1);<br>	<br>    printf("搜尋子字串：");<br>    gets(str2);<br>	<br>    loc = strspn(str1, str2);<br>	<br>    if(loc == strlen(str1)) {<br>        printf("完全匹配\n");<br>    }<br>    else {<br>        printf("從索引位置 %d 處開始不匹配\n", loc);<br>    }<br>	<br>    return 0; <br>}</pre>


      <span class="postbody"><br>


      </span><span class="postbody"><small>執行結果：</small></span><br>








      
      
      
      
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">








        <tbody>








          <tr>








            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">輸入字串：How do you do?<br>


搜尋子字串：How do joe do?<br>


從索引位置 7 處開始不匹配</span></small><span style="color: rgb(255, 255, 255);"><br>








            </span></td>








          </tr>








        
        
        
        
        
        
        
        </tbody>
      
      
      
      
      
      
      
      </table>








      <br>


      <small>以上都是直接搜尋字串中的子字串，以下介紹的是搜尋字串中的字元。<br>


      <br>


      </small><small>strchr()函式找出字串中的指定字元第一次出現，若找到則傳回該字元的指標，否則傳回NULL，您可以用找到的指標位置減去字串</small><small>（字元陣列）</small><small>開頭位址，如此就可以得到其於字串中的索引位置，而strrchr()則是與strchr()類似，只不過它是反向搜尋：<br>


      </small>
      
      
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">char* strchr(const char*, int);</span></small><br>


      <small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;"></span></small><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">char* strrchr(const char*, int);</span></small><br>


      </div>


      <small><br>


strcspn()函式則是找出一個字串中與另一個字串任何字元第一次匹配的索引位置，若無則傳回字串長度：</small><br>


      
      
      <div style="margin-left: 40px;"><small style="font-weight: bold; font-family: Courier New,Courier,monospace;">size_t strcspn(const char*, const char*);</small><br>


      </div>


      <br>


      <small>直接寫個範例示範strcspn()函式之使用：<br>


      </small>
      
      
      <pre>#include &lt;stdio.h&gt; <br>#include &lt;stdlib.h&gt;<br>#include &lt;string.h&gt;<br><br>int main(int argc, char* argv[]) {<br>    char str1[80];<br>    char str2[80];<br>    size_t loc;<br>	<br>    printf("輸入字串：");<br>    gets(str1);<br>	<br>    printf("搜尋子字串：");<br>    gets(str2);<br>	<br>    loc = strcspn(str1, str2);<br>	<br>    if(loc == strlen(str1)) {<br>        printf("沒有任何字元匹配\n");<br>    }<br>    else {<br>        printf("索引位置 %d 處匹配到字元\n", loc);<br>    }<br>	<br>    return 0; <br>}</pre>


      <br>


      <span class="postbody"><small>執行結果：</small></span><br>








      
      
      
      
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">








        <tbody>








          <tr>








            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">輸入字串：H<span style="font-weight: bold;">o</span>w do you do?<br>


搜尋子字串：w<span style="font-weight: bold;">o</span><br>


索引位置 1 處匹配到字元</span></small><span style="color: rgb(255, 255, 255);"><br>








            </span></td>








          </tr>








        
        
        
        
        
        
        
        </tbody>
      
      
      
      
      
      
      
      </table>







      <br>


      <small>strpbrk()函式則與strcspn()類似，只不過完全不匹配的話，則傳回NULL：<br>


      </small>
      
      
      <div style="margin-left: 40px;"><small style="font-weight: bold; font-family: Courier New,Courier,monospace;">size_t strpbrk(const char*, const char*);</small><br>


      </div>


      <small><br>


      </small><small><br>


      <br>


      <br>


      </small><span class="postbody"><br>











      </span> </td>












      <td style="width: 250px; text-align: center; vertical-align: top;"><comment title=" adsense for content" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment>&nbsp;
      
      
      
      
      
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      
      
      
      
      
      
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>







      <br>






 <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>
      <br>
      
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->&#160;</script>&nbsp;
      
      
      
      
      
      
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js"></script><comment title=" adsense for content end" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment><br>







      <br>






      
      
      
      
      
      
      <center>
      
      
      
      
      
      
       <br>







      </center>







 </td>












    </tr>












  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>












<br>











<span class="postbody"><br>












<br>












</span>
<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script>
</body>

<!-- Mirrored from openhome.cc/Gossip/CGossip/StringCmpSearch.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:08:06 GMT -->
</html>
