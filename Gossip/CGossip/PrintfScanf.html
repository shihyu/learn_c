<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<!-- Mirrored from openhome.cc/Gossip/CGossip/PrintfScanf.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:08:05 GMT -->
<head>




















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">




















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">




















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type">



















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <title>printf() 與 scanf()</title>
</head>


<body>




















<h3><a href="../index.html">From
Gossip@Openhome</a></h3>




















<h1><a href="index.html">C&nbsp;Gossip: printf() 與 scanf()</a></h1>




















<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">




















  <tbody>




















    <tr>




















      <td style="width: 676px; vertical-align: top;"> <small>

學習C的過程中，通常是由終端機，也就是文字模式下開始，為了與程式互動，在終端機下輸出程式執行結果，或是從終端機取得使用者的輸入資料是基本需求，在C中標準輸入輸出是由stdio提供，這也就是為何您要在程式的一開頭終是加上：<br>









      </small>
      
      
      
      
      
      
      
      
      
      <div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">#include &lt;stdio.h&gt;</span></small><br>









      </div>









      <small>
      <br>









      </small><small>



將訊息輸出至終端機，稱之為「標準輸出」（Stand
output），C藉由printf()將訊息輸出至終端機，</small><small>我們已經看過幾個printf()函式的應用了，基本上，printf()就是將您指定的文字、數值等輸出至螢幕上，並且執行過後會傳回所輸出的字元數，例如：<br>











      </small>
      
      
      
      
      
      
      
      
      
      
      
      <pre>#include &lt;stdio.h&gt;<br><br>int main(void) {<br>    int count = printf("This is a test!\n");<br>    printf("%d\n", count);<br>&nbsp;<br>    return 0;<br>}</pre>



















      <span class="postbody"><br>











      <small>"This is a test!\n"當中包括換行字元，共有16個字元，因此count的值會是16，顯示結果如下：</small></span><br>















      
      
      
      
      
      
      
      
      
      
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">















  <tbody>















    <tr>















      <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">This is a test!<br>











16</span></small></td>











          </tr>











        
        
        
        
        
        
        
        
        
        
        
        </tbody>
      
      
      
      
      
      
      
      
      
      
      
      </table>











      <br>











      <small>



標準輸出可以被重新導向至一個檔案，您可以在執行程式時使用"
&gt;&gt;"將輸出結果導向至指定的檔案，例如（假設編譯後的可執行檔為main）：<br>











      </small>

      
      
      
      
      
      
      
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">main
&gt;&gt; result.txt</span></small></div>









      <br>









      <small>



如果程式的目的是顯示"Hello! World!"，則上面的執行會將結果導向至result.txt，而不會在螢幕上顯示"Hello!
World!"，result.txt中將會有輸出結果Hello!
World!。<br>









      <br>









      </small><small>



要
重新導向 standard output 是用 '&gt;', standard input 則是
"&lt;"，而"&gt;&gt;"
除了重導 standard output
後，還有附加的功能，也就是會把輸出附加到被導向的目標檔案後頭，如果目標檔案本來不存在，那麼效果就和"&gt;"一樣。<br>









      <br>









如果在使用printf()時要指定整數、浮點數、字元等進行顯示，則要配合格式指定字（format specifier），以下列出幾個可用的格式指定碼：</small><br>












      
      
      
      
      
      
      
      
      
      
      
      <table align="left" border="1" width="100%">












        <tbody>












          


          <tr>









            <td align="left" valign="top"><small>%c </small></td>









            <td align="left" valign="top"><small>以字元
方式輸出 </small></td>









          </tr>









          <tr>












            <td align="left" valign="top"><small>%d
            </small></td>












            <td align="left" valign="top"><small>10
進位整數輸出 </small></td>












          </tr>












          <tr>









            <td align="left" valign="top"><small>%o
            </small></td>









            <td align="left" valign="top"><small>以8進
位整數方式輸出 </small></td>









          </tr>









          <tr>









            <td align="left" valign="top"><small>%u </small></td>









            <td align="left" valign="top"><small>無號整數輸出 </small></td>









          </tr>









          <tr>









            <td align="left" valign="top"><small>%x,
%X </small></td>









            <td align="left" valign="top"><small>將整
數以16進位方式輸出 </small></td>









          </tr>









          <tr>












            <td align="left" valign="top"><small>%f
            </small></td>












            <td align="left" valign="top"><small>浮點
數</small><small>輸出</small></td>












          </tr>












          <tr>












            <td align="left" valign="top"><small>%e,
%E </small></td>












            <td align="left" valign="top"><small>使用科學記號顯示浮點數 </small></td>












          </tr>












          


          


          


          


          


          


          <tr>












            <td align="left" valign="top"><small>%g, %G</small></td>












            <td align="left" valign="top"><small>浮點數輸出，取%f或%e（%f或%E），看哪個表示精簡</small></td>












          </tr>












        
        <tr>









            <td align="left" valign="top"><small>%%</small></td>









            <td align="left" valign="top"><small>顯示 %</small></td>









          </tr>









          <tr>









            <td align="left" valign="top"><small>%s </small></td>









            <td align="left" valign="top"><small>字串輸出 </small></td>









          </tr>









        
        
        
        
        
        
        
        
        
        </tbody>
      
      
      
      
      
      
      
      
      
      
      
      </table>












      <br>












      <br>












      <br>









      <span class="postbody">

      <br>









      <small>基本上，要顯示的是什麼資料型態，就必須搭配對應資料型態的格式指定字，但%d若用來輸出某個字元，將顯示其整數編碼值，若%c用來顯示某個整數，將顯示該整數對應編碼的字元，一個使用的範例如下所示：<br>









      </small></span><span class="postbody"></span>
      
      
      
      
      
      
      
      
      
      <pre>#include &lt;stdio.h&gt;<br><br>int main(void) {<br>    printf("顯示字元 %c\n", 'A');<br>    printf("顯示字元編碼 %d\n", 'A');<br>    printf("顯示字元編碼 %c\n", 65);    <br>    printf("顯示十進位整數 %d\n", 15);<br>    printf("顯示八進位整數 %o\n", 15);<br>    printf("顯示十六進位整數 %X\n", 15);<br>    printf("顯示十六進位整數 %x\n", 15);    <br>    printf("顯示科學記號 %E\n", 0.001234);    <br>    printf("顯示科學記號 %e\n", 0.001234);    <br>   <br>    return 0;<br>}</pre>









      <span class="postbody"><br>









      <small>顯示結果如下所示：</small><br>









      </span>
      
      
      
      
      
      
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">









        <tbody>









          <tr>









            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">顯示字元 A<br>









顯示字元編碼 65<br>









顯示字元編碼 A<br>









顯示十進位整數 15<br>









顯示八進位整數 17<br>









顯示十六進位整數 F<br>









顯示十六進位整數 f<br>









顯示科學記號 1.234000E-003<br>









顯示科學記號 1.234000e-003<br>









            </span></small></td>









          </tr>









        
        
        
        
        
        
        
        
        
        </tbody>
      
      
      
      
      
      
      
      
      
      </table>









      <br>









      <small>

您可以在輸出浮點數時指定精度，例如若為浮點數：<br>











      </small>
      
      
      
      
      
      
      
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">printf("example:%.2f\n",
19.234);</span><br>












      </small></div>












      <small><br>

.2指定小數點後取兩位，執行結果會輸出：<br>











      </small>
      
      
      
      
      
      
      
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">example:19.23</span><br>












      </small></div>












      <small><br>












您也可以指定輸出時，至少要預留的字元寬度，無論是數值或字串，例如：<br>











      </small>
      
      
      
      
      
      
      
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">printf("example:%6.2f\n",
19.234);</span><br>












      </small></div>












      <small><br>

整數6表示預留6個字元寬度，由於預留了6個字元寬度，不足的部份要由空白字元補上，所以執行結果會輸出如下（19.23只佔五個字元，所以補上一個空白在前端）：<br>











      </small>
      
      
      
      
      
      
      
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">example:
19.23</span><br>












      </small></div>












      <small><br>









若在%之後指定負號，例如%-6.2f，則表示靠左對齊，沒有指定則靠右對齊，例如：<br>









      </small>
      
      
      
      
      
      
      
      
      
      <pre>#include &lt;stdio.h&gt;<br><br>int main(void) {<br>    printf("example:%6.2f\n", 19.234);<br>    printf("example:%-6.2f\n", 19.234);<br>    <br>    return 0;<br>}</pre>









      <small><br>









顯示結果如下：<br>









      </small>
      
      
      
      
      
      
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">









        <tbody>









          <tr>









            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">example: 19.23<br>









example:19.23</span></small></td>









          </tr>









        
        
        
        
        
        
        
        
        
        </tbody>
      
      
      
      
      
      
      
      
      
      </table>









      <br>

      <small>若事先無法決定字元寬度，則可以使用*，例如：<br>

      </small>
      
      <pre>#include &lt;stdio.h&gt;<br>#include &lt;stdlib.h&gt;<br><br>int main(void) {<br>    printf("%*d\n", 1, 1);<br>    printf("%*d\n", 2, 1);<br>    printf("%*d\n", 3, 1);<br>    return 0;<br>}</pre>

      <br>

      <small>printf()的*將被之後的第一個引數所取代，所以第一個printf()將預留一個字元寬度，第二個預留兩個字元寬度，第三個預留三個，顯示結果如下：<br>









      </small>
      
      
      
      
      
      
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">









        <tbody>









          <tr>









            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">1<br>

&nbsp;1<br>

&nbsp; 1</span></small></td>









          </tr>









        
        
        
        
        
        
        
        
        
        </tbody>
      
      
      
      
      
      
      
      
      
      </table>









      <br>









      <small>



如果打算取得使用者的輸入，則可以使用「標準輸入」（Standard
input）的scanf()函式，並搭配格式指定字與&amp;取址運算子指定給變數，例如：</small>



      <br>







      
      
      
      
      
      
      
      <pre>#include &lt;stdio.h&gt;<br><br>int main(void) {<br>    int input;<br>    <br>    printf("請輸入數字：");<br>    scanf("%d", <span style="font-weight: bold;">&amp;</span>input);<br>    printf("您輸入的數字：%d\n", input);<br>    <br>    return 0;<br>}</pre>







      <br>







      <small>在程式中先宣告了一個整數變數input，使用scanf()函式時，若輸入的數值為整數，則使用格式指定字%d，若輸入的是
其它資料型態，則必須使用對應的格式指定字，</small><small>如果是double，特別注意要使用%lf來指定，</small><small>而您必須告知程式儲存資料的變數位址，為此，必須使用&amp;取址運算子，這會將變數的記憶體位址取出，則
輸入的數值就知道</small><small>變數的記憶體位址並</small><small>儲存之（但字元陣列名稱本身就有位址資訊，故不用&amp;來取址，之後說明陣列時會再看到）。<br>







      <br>







執行結果：<br>







      </small>
      
      
      
      
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">







        <tbody>







          <tr>







            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">請輸入數字：10<br>







您輸入的數字：10</span></small></td>







          </tr>







        
        
        
        
        
        
        
        </tbody>
      
      
      
      
      
      
      
      </table>







      <br>







      <small>scanf()在接受輸入時，可以接受多個值，也可以指定輸入的格式，例如：<br>







      </small>
      
      
      
      
      
      
      
      <pre>#include &lt;stdio.h&gt;<br><br>int main(void) {<br>    int number1, number2;<br>    <br>    printf("請輸入兩個數字，中間使用空白區隔）：");<br>    scanf("%d %d", &amp;number1, &amp;number2);<br>    printf("您輸入的數字：%d %d\n", number1, number2);<br>    <br>    printf("請再輸入兩個數字，中間使用-號區隔）：");<br>    scanf("%d-%d", &amp;number1, &amp;number2);<br>    printf("您輸入的數字：%d-%d\n", number1, number2);<br>    <br>    return 0;<br>}</pre>







      <br>









      <span class="postbody"><small>在第一個scanf()中，指定了使用空白來區隔兩個輸入，而第二個scanf()中，指定了使用-來區隔兩個輸入，一個執行與輸入的結果如下所示：<br>







      </small></span>
      
      
      
      
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">







        <tbody>







          <tr>







            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">請輸入兩個數字，中間使用空白區隔）：10 20<br>







您輸入的數字：10 20<br>







請再輸入兩個數字，中間使用-號區隔）：30-40<br>







您輸入的數字：30-40</span></small></td>







          </tr>







        
        
        
        
        
        
        
        </tbody>
      
      
      
      
      
      
      
      </table>







      <br>







      <small>scanf()還可以指定可接受的字元集合，例如若只想接受1到5的字元，則可以如下：<br>







      </small>
      
      
      
      
      
      
      
      <pre>#include &lt;stdio.h&gt;<br><br>int main(void) {<br>    char str[50];<br>    <br>    printf("請輸入1到5的字元：");<br>    scanf("%<span style="font-weight: bold;">[1-5]</span>", str);<br>    printf("輸入的字元為 %s\n", str);<br><br>    fflush(stdin); // 清除輸入緩衝區<br><br>    printf("請輸入XYZ任一字元：");<br>    scanf("%<span style="font-weight: bold;">[XYZ]</span>", str);<br>    printf("輸入的字元為 %s\n", str);<br>    <br>    return 0;<br>}</pre>







      <span class="postbody"><small><br>


str為C語言中的&nbsp;</small></span><a href="String.html"><small>字串</small><small>（</small><small>字
元陣
列</small><small>）</small></a><small>，</small><span class="postbody"><small>scanf()函式連續讀入符合集合的字元並放到字元陣列中，直到讀到不符合的字元為止，剩下的字元仍會存在輸入緩衝區中，</small></span><span class="postbody"><small>可以直接使用fflush(stdin)清除輸入緩衝區，以利進行下一次重新輸入，</small></span><span class="postbody"><small>scanf()函式若接受字元，則傳回所接受的字元數，否則直接略過輸入而傳回0，在您學會流程控制語法之後，可以據以判斷該作什麼處理（像是使用if來針對不接受輸入時的處理）。<br>







      <br>


執行結果如下：<br>







      </small></span>
      
      
      
      
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">







        <tbody>







          <tr>







            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">請輸入1到5的字元：146731<br>


輸入的字元為 14<br>


請輸入XYZ任一字元：XYZXDX<br>


輸入的字元為 XYZX</span></small></td>







          </tr>







        
        
        
        
        
        
        
        </tbody>
      
      
      
      
      
      
      
      </table>







      <br>







      <small>您可以使用%[0-9]指定取得0至9的字元，使用%[A-z]指定取得ASCII表中的A到z的字元，如果要排除的話，則使用^，例如%[^ABC]會取得ABC字元以外的所有字元。</small><br>







      <span class="postbody"><br>







      <br>



















      </span> </td>




















      <td style="width: 250px; text-align: center; vertical-align: top;"><comment title=" adsense for content" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment>&nbsp;
      
      
      
      
      
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      
      
      
      
      
      
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>







      <br>







      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>
      <br>
      
      
      
      
      
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//--></script>&nbsp;
      
      
      
      
      
      
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js"></script><comment title=" adsense for content end" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment><br>







      <br>






      
      
      
      
      
      
      <center>
      
      
      
      
      
      
       <br>







      </center>







 </td>




















    </tr>




















  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>




















<br>



















<span class="postbody"><br>




















<br>




















</span>
<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script>
</body>

<!-- Mirrored from openhome.cc/Gossip/CGossip/PrintfScanf.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:08:05 GMT -->
</html>
