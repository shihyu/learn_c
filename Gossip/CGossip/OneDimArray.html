<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<!-- Mirrored from openhome.cc/Gossip/CGossip/OneDimArray.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:08:05 GMT -->
<head>











  
  
  
  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">











  
  
  
  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">











  
  
  
  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type">










  
  
  
  
  
  
  
  
  
  
  <title>一維陣列</title>
</head>


<body>











<h3><a href="../index.html">From
Gossip@Openhome</a></h3>











<h1><a href="index.html">C&nbsp;Gossip: 一維陣列</a></h1>











<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">











  <tbody>











    <tr>











      <td style="width: 676px; vertical-align: top;"> <small>

您現在要整理全班的程式設計小考成績，您希望寫個小程式，全班共有40名學生，所以您必須有40個變數來儲存學生的成績，現在問題來了，根據之前學過的，
難道您要宣告40個名稱不同的變數來儲存學生的成績資料嗎？ <br>






      <br>







當然您知道不會這麼麻煩的，C提供「陣列」（Array）讓您可以宣告一個以「索引」（index）作為識別的資料結構，宣告陣列的方式如下：<br>






      </small>

      
      
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">資
料型態
名稱[大小];</span><br>







      </small></div>







      <small><br>







資料型態可以是int、float、char等等之前所學過的資料型態宣告，以下是幾個宣告的範例： <br>






      </small>
      
      
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">int
iarr[10];&nbsp; &nbsp; // 宣告10個元素的整數陣列</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">double
darr[10];&nbsp; &nbsp; // 宣告10個元素的浮點數陣列</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">char
carr[10];&nbsp; &nbsp; // 宣告10個元素的字元陣列</span><br>







      </small></div>







      <small><br>







這是靜態陣列的宣告方式，陣列長度必須事先決定，所以您不可以使用變數來事後決定陣列的長度，如果您要動態宣告陣列長度，可以使用一些資料結構與動態記憶
體宣告來解決陣列大小必須固定的問題，這在之後才會說明。 <br>






      <br>







宣告陣列之後，陣列所配置到的記憶體空間中所儲存的數是未知的，所以在初始陣列元素值之前，當中的元素值是未知的，如果您在宣告變數時尚未決定陣列中的
值，可以這麼宣告陣列： <br>






      </small>

      
      
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">int
irr[10] = {0}; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">double
darr[10] = {0.0}; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">char
carr[10] = {'\0'}; </span><span style="font-weight: bold; font-family: Courier New,Courier,monospace;"></span><br>







      </small></div>







      <small><br>







上面的幾個宣告，整數陣列中的元素都會被初始為0，浮點數陣列則會被初始為0.0，字元陣列則會被初始為空字元（'\0'），在宣告陣列時初始陣列元素，可以避免其它的程式存取到非預期的數值。 <br>






      <br>







您也可以在宣告陣列時初始所有的陣列值，例如： <br>






      </small>

      
      
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">int
iarr[5] = {0, 1, 2, 3, 4}; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">double
darr[5] = {0.0, 0.1, 0.2, 0.3, 0.4}; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">char
carr[5] = {'A', 'B', 'C', 'D', 'E'}; </span><span style="font-weight: bold; font-family: Courier New,Courier,monospace;"></span><br>







      </small></div>







      <small><br>







當要存取陣列中的值時，可以使用下標（Subscript）運算子[ ]
加上「索引」（Index）指定要存取的陣列元素，C的索引值一律由0開始，而不是由1開始，這點初學者必須特別注意，下
面這個簡單的程式可以告訴您如何使用索引存取陣列元素： <br>



      </small>
      
      
      
      <pre>#include &lt;stdio.h&gt;<br>#define LENGTH 10<br><br>int main(void) {<br>    int iarr[LENGTH] = {0};<br>    int i;<br>    <br>    for(i = 0; i &lt; LENGTH; i++) {<br>        printf("%d ", iarr[i]);<br>    }<br>    putchar('\n');<br><br>    for(i = 0; i &lt; LENGTH; i++) {<br>        iarr[i] = i; <br>    }<br><br>    for(i = 0; i &lt; LENGTH; i++) {<br>        printf("%d ", iarr[i]); <br>    }<br>    putchar('\n');<br>    <br>    return 0;<br><br>}</pre>



      <small><span style="color: rgb(255, 255, 255);">0 0 0 0 0 0 0 0 0 00 1 2 3 4 5 6 7 8 9</span></small><span style="color: rgb(255, 255, 255);"></span><br>






      <small>
由於陣列本身並不知道自己的長度資訊，所以您必須額外記錄陣列長度，就如程式中的LENGTH的作用，#define是前置處理器指令，#define LENGTH 10定義了，當編譯器看到LENGTH時，都自動取代為10，之後再進行編譯。<br>






      <br>







C中陣列的索引值由0開始並不是沒有原因的，事實上陣列名稱就指向陣列記憶體的第一個位置的位址，而索引值表示所指定的陣列元素相對於陣列第一個記憶
體位置的位移量（Offset），位移的量與資料型態長度有關，如果是int整數，則每次位移時是一個int整數的長度，例如在上例中iarr[0]索引
值為0，所以表示位移量為0，自然就是指第一個元素，而iarr[9]就是指相對於第一個元素的位移量為9，C就是根據陣列第一個元素的記憶體位置與
位移量來得到所指定要存取的陣列元素。 <br>






      <br>







如果您在宣告陣列時只希望初始幾個元素，則可以這麼宣告： <br>






      </small>


      
      
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">int
iarr[5] = {0, 1}; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">double
darr[5] =
{0.0, 0.1}; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">char
carr[5] =
{'A', 'B'}; </span><br>







      </small></div>







      <small><br>







像上例中，都只初始索引0與索引1的兩個元素，其它未初始的元素，整數的話會自動初始為0，浮點數的話會自動初始為0.0，字元的話會自動初始為空字元 ，其它未初始的元素值則是未知的。 <br>






      <br>







如果您在宣告陣列時會一併初始所有的元素，則C允許您不宣告陣列元素大小，它會根據您指定的元素個數自動設定陣列大小，例如： <br>






      </small>

      
      
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">int
iarr[] = {1, 2, 3};
      </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">double
darr[] =
{0.4, 3.2, 1.0, 4.2}; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">char
carr[] =
{'A', 'B'};</span><br>







      </small></div>







      <small><br>







上面宣告中，iarr[]的元素個數會是3，darr[]的個數會是4，而carr[]的個數會是2。 <br>






      <br>







陣列在使用時，得知陣列長度（元素個數）是必要的，您不可以存取超過陣列長度的記憶體，這會發生無法預期的結果，然而如何得知陣列的長度，您可以使用
sizeof()運算子，例如： <br>






      </small>

      
      
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">int iarr[] = {1, 2, 3, 4, 5, 6};<br>



printf("陣列長度：%d\n", sizeof(iarr) / sizeof(iarr[0]));</span><span style="font-weight: bold; font-family: Courier New,Courier,monospace;"></span><br>







      </small></div>







      <small><br>







這個例子會顯示陣列的長度為6；sizeof()會傳回變數所指向的記憶體空間所佔大小，您只要取得整個陣列的記憶體空間大小，再除以一個陣列元素的大
小，就可以如上取得陣列的長度了。 <br>






      <br>







您不可以將陣列直接指定給另一個陣列，或是直接比較兩個陣列是否相同，例如：<br>






      </small>

      
      
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">int
arr1[5];</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">int
arr2[5];</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">...</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">arr1
= arr2; //
錯誤！不能直接指定陣列給另一個陣列</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">...</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">if(arr1
== arr2) {
// 錯誤！不能直接比較兩個陣列是否相同</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; ...</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">}</span><br>







      </small></div>







      <small><br>







如果要將陣列指定給另一個陣列，您只能循序一個一個元素進行複製，例如：<br>






      </small>
      
      
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;"></span><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">int
arr1[5];</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">int
arr2[5];</span><br style="font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">...<br>

int i;<br style="font-family: Courier New,Courier,monospace;">

      </span>





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">for(i = 0; i
&lt; 5; i++) {</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp;
arr1[i] = arr2[i];</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">







      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">}</span><br>







      </small></div>







      <small><br>







同樣的，如果想比較兩個陣列元素內容是否相同，也要用一個個元素進行比對。</small><br>










      <span class="postbody"><br>










      </span> </td>











      <td style="width: 250px; text-align: center; vertical-align: top;"><comment title=" adsense for content" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment>&nbsp;
      
      
      
      
      
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      
      
      
      
      
      
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>







      <comment title=" adsense for content end" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment><br>







      <comment title=" adsense for content" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment>
      
      
      
      
      
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->&#160;</script>&nbsp;
      
      
      
      
      
      
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js"></script><comment title=" adsense for content end" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment><br>







      <br>




 <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>
      <br>

      
      
      
      
      
      
      <center>
      
      
      
      
      
      
       <br>







      </center>







 </td>











    </tr>











  
  
  
  
  
  
  
  
  
  
  </tbody>
</table>











<br>










<span class="postbody"><br>











<br>











</span>
<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script>
</body>

<!-- Mirrored from openhome.cc/Gossip/CGossip/OneDimArray.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:08:05 GMT -->
</html>
