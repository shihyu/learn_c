<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<!-- Mirrored from openhome.cc/Gossip/CGossip/ArithmeticType%20conversion.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:08:05 GMT -->
<head>









  
  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">









  
  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">









  
  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type">








  
  
  
  
  
  
  
  
  <title>算術（Arithmetic）運算、型態轉換（Type conversion）</title>
</head>


<body>









<h3><a href="../index.html">From
Gossip@Openhome</a></h3>









<h1><a href="index.html">C&nbsp;Gossip: 算術（Arithmetic）運算、型態轉換（Type conversion）</a></h1>









<table style="text-align: left; width: 946px; height: 1220px;" border="0" cellpadding="0" cellspacing="0">









  <tbody>









    <tr>









      <td style="width: 676px; vertical-align: top;"> <small>在中提供與算術相關的
加（+）、減（-）、乘（*）、除（/）的運算子，另外還有一個也很常用的餘除運算子（%）或稱模數（Modulus）運算子，這類以數學運算為主的
運算子，稱之為「算術運算子」（Arithmetic operator）。 <br>


      <br>




這類運算子的使用基本上由左而右進行運算，遇到加減乘除的順序問題時，也是先乘除後加減，必要時加上括號表示運算的先後順序，例如這個程式碼會在主控台顯
示7： <br>


      </small>



      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">printf("%d\n", 1 + 2 * 3);</span><br>




      </small></div>




      <small><br>




編譯器在讀取程式碼時，是由左往右讀取的，而初學者往往會犯一個錯誤，例如(1+2+3) /
4，由於我們習慣將分子寫在上面，而分母寫在下面的方式，使得初學者往往將之寫成了： <br>


      </small>

      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">printf("%d\n", 1+2+3 / 4);</span><br>




      </small></div>




      <small><br>




這個程式事實上會是這樣運算的：1+2+(3/4)；為了避免這樣的錯誤，在必要的時候為運算式加上括號才是最保險的，例如： <br>


      </small>

      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">printf("%d\n", (1+2+3) /
4);</span><br>




      </small></div>




      <small><br>




%運算子是餘除運算子
它計算除法後的餘數，一個例子是若您要產生指定位數的亂數，就可以使用%運算子，假設亂數產生函式為rand()，它可以產生正整數亂數，但您並不知道它
的最大範圍是多少，您可以這樣產生0到99的亂數： <br>


      </small>

      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">printf("%d\n", rand() %
100);</span><br>




      </small></div>




      <small><br>




您也可以利用%來作循環計數之用，例如由0計數至9不斷循環： <br>


      </small>

      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">couter
= (counter + 1)
% 10;</span><br>




      </small></div>




      <small><br>




算術運算子使用不難，但要注意型態轉換的問題，請您先看看這段程式會印出什麼結果？ <br>


      </small>

      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">int
number = 10; </span></small><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;"></span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">

      <small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;"></span>


      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">printf("%d\n", number / 3);</span><br>




      </small></div>




      <small><br>




答案不是3.3333，而是3，小數點之後的部份被自動消去了，這是因為您的number是整數，而除數3也是整數，運算出來的程式被自動轉換為整數了，而為了正確的顯示運算的整數結果，還要使用%d格式指定字，
那下面這個程式呢？<br>


      </small>

      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">double number = 10.0;<br>

printf("%f\n", number / 3);</span><span style="font-weight: bold; font-family: Courier New,Courier,monospace;"></span><br>




      </small></div>




      <small><br>




這個程式的結果會是3.3333，</small><small>而為了正確的顯示運算的整數結果，還要使用%f格式指定字，</small><small>這是C的隱式型態轉換（Implicit type
conversion），在一個型態混雜的算式中，長度較長的資料型態會成為目標型態，較小的型態會自動提升為目標型態，因而在上例中3會被提升為3.0
再進行運算，結果就可以顯示無誤，這樣的轉換又稱算術轉換（Arithmetic conversion）。<br>

      <br>

除了注意隱式型態轉換的問題，運算結果輸出時，還必須搭配格式指定字，才可以正確的顯示最後運算的結果。<br>

      <br>

      </small><small>


在一個指定的動作中，左邊的數值會成為目標型態，當右邊的數值型態比左邊的數值型態長度小時，右邊的數值會自動提升為目標型態，例如：<br>


      </small>



      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">int
num = 10;</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">double
number =
num;</span><br>




      </small></div>




      <small><br>




在上例中，number的值最後會是10.0，在指定的動作時，如果右邊的數值型態比左邊的數值型態型態長度大時，超出可儲存範圍的部份會被自動消去，例
如將浮點數指定給整數變數，則小數的部份會被自動消去，例子如下，num最後的結果會是3而不是3.14，而為了顯示正確的整數結果，輸出時要指定格式指定字%d：<br>


      </small>

      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">int num = 0;<br>

double number = 3.14;<br>

num = number; <br>

printf("%d\n", num);</span><span style="font-weight: bold; font-family: Courier New,Courier,monospace;"></span><span style="font-weight: bold; font-family: Courier New,Courier,monospace;"></span><br>




      </small></div>




      <small><br>

在兩個整數型態相除時，您也可以進行型態轉換，將其中一個型態轉換至double型態再進行運算，例如：<br>


      </small>

      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">int
number = 10;</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">




      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">printf("%f\n", (double)&nbsp;number / 3);</span><br>




      </small></div>




      <small><br>




上例中結果會顯示3.3333。</small><span class="postbody">






      </span> </td>









      <td style="width: 250px; text-align: center; vertical-align: top;"><comment title=" adsense for content" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment>&nbsp;
      
      
      
      
      
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      
      
      
      
      
      
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>







      <comment title=" adsense for content end" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment><br>







      <comment title=" adsense for content" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment>
      
      
      
      
      
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->&#160;</script>&nbsp;
      
      
      
      
      
      
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js"></script><comment title=" adsense for content end" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment><br>







      <br>






      
      
      
      
      
      
      <center>
      
      
      
      
      
      
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<br>







      </center>







 </td>









    </tr>









  
  
  
  
  
  
  
  
  </tbody>
</table>









<br>








<span class="postbody"><br>









<br>









</span>
<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script>
</body>

<!-- Mirrored from openhome.cc/Gossip/CGossip/ArithmeticType%20conversion.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:08:05 GMT -->
</html>
