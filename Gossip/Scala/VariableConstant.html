<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<!-- Mirrored from openhome.cc/Gossip/Scala/VariableConstant.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:11:14 GMT -->
<head>







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">







  
  
  
  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">







  
  
  
  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type">







  
  
  
  
  
  
  
  <title>變數、常數</title></head>
<body>







<h3><a href="../index.html">From
Gossip@Openhome</a></h3>







<h1><a href="index-2.html">Scala Gossip: 變數、常數</a></h1>

<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">

  <tbody>

    <tr>

      <td style="vertical-align: top; width: 250px; text-align: center;"><script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>
      <br>
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>

      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br><br><center> </center></td>

      <td style="vertical-align: top; width: 690px; text-align: left;"><small>如果你要宣告一個變數（Variable），在Scala中可以使用<span style="font-weight: bold;">var</span>或<span style="font-weight: bold;">val</span>來宣告，底下是個用val</small><small>宣告的例子：<br></small><div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">val sum: Int = 1 + 2<br>val text: String = "Hello"<br>val scores: Array[Int] = Array(80, 90, 100)<br></span></small></div><small><br></small><small>Scala是個靜態</small><small>（static type）</small><small>語言，由變數帶有型態資訊，以上的示範中，sum是變數名稱，Int是其型態，text是變數名稱，型態為String，而scores是變數名稱，型態為Array[Int]（陣列中內含Int元素）。<br><br>這冗長的宣告方式確實是</small><small>宣告</small><small>變數的完整型式，但事實上，它可以使用以下的方式宣告：<br></small><div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">val sum = 1 + 2</span></small><br><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">val text = "Hello"</span></small><br><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">val scores = Array(80, 90, 100)</span></small><br></div><small><br>畢竟從值的指定來看，1 + 2結果會是Int，"Hello"則是個String，第三行也可以知道是個Array。在某些情況下，若Scala可以由陳述句中，推斷出變數的型態，則無需在變數上</small><small>重複宣告類型，這是Scala的<span style="font-weight: bold;">類型推斷（type inference）</span>特性。<br><br>在Scala中，<span style="font-weight: bold;">由val宣告的變數，一旦指定值，就不可以再重新指定別的值給它</span>，例如以下會有錯誤訊息：</small><small><br></small><table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">




        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">scala&gt; val sum = 1<br>sum: Int = 1<br><br>scala&gt; sum = 2<br>&lt;console&gt;:5: error: reassignment to val<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sum = 2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ^<br><br>scala&gt;</span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td>




          </tr>




        
        
        
        </tbody>
      
      
      
      </table>

<small><small><big><br></big></small>如果你希望所宣告的變數在指定值之後，稍後在其它地方也可以再設定新的值給它，則要使用var宣告：</small><small><br></small><table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">




        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">scala&gt; var sum = 1<br>sum: Int = 1<br><br>scala&gt; sum = 2<br>sum: Int = 2<br><br>scala&gt;</span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td>




          </tr>




        
        
        
        </tbody>
      
      
      
      </table>

<small><small><big><br></big></small><span style="font-weight: bold;">Scala鼓勵你使用val來宣告變數</span>，Scala認為在演算流程中修改變數的值，會造成程式邏輯的複雜性與不易維護，使用var宣告變數時通常就是一種訊號，表示你可能使用了<a href="http://en.wikipedia.org/wiki/Imperative_programming"> imperative </a>風格的撰寫方式，Scala鼓勵你使用 <a href="http://en.wikipedia.org/wiki/Functional_programming">functional</a> 風格的撰寫方式，也支援撰寫functional風格程式碼的一些特性（不可變動物件、函式物件、模式比對等，之後會一一介紹）。<br><br>使用var宣告值，除了在類別定義中作為資料成員外（預設為null），都必須明確給定值給它，否則會發生錯誤，若不知道值為何，至少要設為null：</small><small><br></small><table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">




        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">scala&gt; var x;<br>&lt;console&gt;:1: error: '=' expected but ';' found.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var x;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ^<br><br>scala&gt; var x = null<br>x: Null = null<br><br>scala&gt;</span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td>




          </tr>




        
        
        
        </tbody>
      
      
      
      </table>

<small><small><big><br></big></small></small><small><small><big>當你將長度較小的資料型態（例如Int）指定給長度較大的資料型態（例如Long），這樣的指定在精確度並不會失去，所以這樣的指定是可行的，但你將長度較大的指定給較小的，就會發生問題：</big></small></small><small><br></small><table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">




        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">scala&gt; var x = 1<br>x: Int = 1<br><br>scala&gt; var y = 2L<br>y: Long = 2<br><br>scala&gt; x = y<br>&lt;console&gt;:6: error: type mismatch;<br>&nbsp;found&nbsp;&nbsp; : Long<br>&nbsp;required: Int<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x = y<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ^<br><br>scala&gt; y = x<br>y: Long = 1<br><br>scala&gt;</span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td>




          </tr>




        
        
        
        </tbody>
      
      
      
      </table>

<small><br>在Scala中要進行轉型（Cast），可以使用<span style="font-weight: bold;">asInstenceOf</span>，但對於數值，更方便的作法是直接呼叫toXXX方法，例如：</small><small><br></small><table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">




        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">scala&gt; var x = 1<br>x: Int = 1<br><br>scala&gt; var y = 2L<br>y: Long = 2<br><br>scala&gt; x = y.asInstanceOf[Int]<br>x: Int = 2<br><br>scala&gt; x = y.toInt<br>x: Int = 2<br><br>scala&gt;</span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td>




          </tr>




        
        
        
        </tbody>
      
      
      
      </table>

<br><small>有個有趣的事是，Scala在宣告變數名稱時，可以使用Unicode編碼（雖然不鼓勵這麼用），例如：</small><small><br></small><table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">




        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">scala&gt; val \u0073\u0075\u006D = 10<br>sum: Int = 10<br><br>scala&gt;</span></small><span style="color: rgb(255, 255, 255);"><br>




            </span></td>




          </tr>




        
        
        
        </tbody>
      
      
      
      </table>

<small><small><big><br></big></small>在Scala中，建議使用駝峰式（Camel case）的命名方式，也就是變數名稱首字小寫，之後每遇到單字首字大寫，例如像scoreOfStudent這樣的名稱。<br><br>在Scala中雖然可以使用_作為變數名稱的字元，例如score_of_student這樣的名稱，但<span style="font-weight: bold;">不建議使用_作為名稱的一部份</span>，因為在Scala的處理中，會使用一些有底線字元的名稱，如果你的變數名稱湊巧使用了相同的名稱，使得Scala混淆了，可能會有一些無法預期的錯誤。<br><br>同樣的，<span style="font-weight: bold;">在Scala中也可以使用$作為名稱的一部份，但不建議使用</span>，因為$是Scala處理中一些內部名稱的表示方式（例如編譯器產生的識別字）。<br><br>再來看常數（Constant）的定義，常數顧名思義就是不變的數，不過若你要在Scala中定義一個常數，不僅僅是使用val，val所宣告的變數，其意義其實是指設定值給它後，就不能再指定值給它，但還是個變數，例如：<br></small><div style="margin-left: 40px;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">def doSome(x: Int) {</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">&nbsp;&nbsp;&nbsp; println(x)</span></small><br style="font-weight: bold; font-family: Courier New,Courier,monospace;"><small style="font-family: Courier New,Courier,monospace;"><span style="font-weight: bold;">}</span></small><br></div><small><br>上
面這個例子，在Scala中定義一個函式（function），其中x是呼叫時接收引數的參數名稱，在Scala中參數一定是val（只是你不用特別加上
val宣告，不過要加也可以，只是寫來冗長）。但事實上，每次你呼叫函式傳入引數不同，x的值也就不同，所以它還是變數（只是在doSome函式中不可重
新指定值）。<br><br>常數的定義，是指那些痡`不變的值，至少在整個程式運行過程中是如此，例如圓周率就是3.141596...這樣的值，或者是你在程式運行過程中絕不改變的值。<span style="font-weight: bold;">在Scala中，對於常數值，所採用的命名慣例是首字大寫</span>，之後可以是</small><small>的駝峰式寫法，</small><small>例如scala.Math中就定義了<span style="font-weight: bold;">Pi</span>表示圓周率，也可以是像scala.Math中<span style="font-weight: bold;">MAX_INT</span>這樣的寫法，這比較符合Java開發人員的慣例，不過Scala鼓勵使用首字大寫的駝峰式寫法（其實這不僅是慣例，在模式比對時，有利用到這樣的常數寫法之特性）。<br><br>在Scala中，還可以將變數名稱包括在`與`（標記號，也就是~符號鍵下方看似單引號的符號）之間，例如：<br></small><div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">val `x` = 10</span></small><br></div><small><br>這個機制的利用時機，可以像是這樣：</small><small><br></small><table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">




        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">scala&gt; val yield = 10<br>&lt;console&gt;:1: error: illegal start of simple pattern<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; val yield = 10<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ^<br><br>scala&gt; val `yield` = 10<br>yield: Int = 10<br><br>scala&gt; `yield`<br>res4: Int = 10<br><br>scala&gt;<br></span></small><span style="color: rgb(255, 255, 255);">




            </span></td>




          </tr>




        
        
        
        </tbody>
      
      
      
      </table>

<small><small><big><br>yield在Scala中是保留字，如果你非得在Scala中使用yeild這個名稱，就可以使用``來包括它。例如以下的範例中，你不可以直接呼叫Thread.yield()，而要改用Thread.`yield`()：</big></small></small><small><br></small><table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">




        <tbody>




          <tr>




            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">scala&gt; Thread.yield()<br>&lt;console&gt;:1: error: identifier expected but 'yield' found.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Thread.yield()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ^<br><br>scala&gt; Thread.`yield`()<br><br>scala&gt;<br></span></small><span style="color: rgb(255, 255, 255);">




            </span></td>




          </tr>




        
        
        
        </tbody>
      
      
      
      </table>

<small><small><big><br></big></small></small><small></small></td>

    </tr>

  </tbody>
</table>

<br>
<br>

<br>

<br>







<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script></body>
<!-- Mirrored from openhome.cc/Gossip/Scala/VariableConstant.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:11:14 GMT -->
</html>