<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<!-- Mirrored from openhome.cc/Gossip/CppGossip/PassBy.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:08:08 GMT -->
<head>



  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">



  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">



  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type">


  
  
  <title>參數的傳值、傳參考</title>
</head>


<body>



<h3><a href="../index.html">From
Gossip@Openhome</a></h3>



<h1><a href="index.html">C++
Gossip:&nbsp;參數傳遞的傳值、傳參考</a></h1>



<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">



  <tbody>



    <tr>



      <td style="width: 676px; vertical-align: top;"><small> 
C++在呼叫函式時的參數傳遞方式主要有兩種：傳值（Pass by value）、傳參考（Pass by
reference）。 <br>



      <br>



參數傳遞時的傳值就是傳送（變數）值給函式上對應的參數，值被複製一份給參數，傳遞者與接受者兩個變數彼此各佔有一個記憶體，互不相干，例如： <br>



      </small>
      
      
      <div style="margin-left: 40px;"><small><span style="font-family: Courier New,Courier,monospace; font-weight: bold;">int
main() { </span><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">



      <span style="font-family: Courier New,Courier,monospace; font-weight: bold;">
&nbsp; &nbsp; int x = 10; </span><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">



      <span style="font-family: Courier New,Courier,monospace; font-weight: bold;">
&nbsp; &nbsp; .... </span><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">



      <span style="font-family: Courier New,Courier,monospace; font-weight: bold;">
&nbsp; &nbsp; cout &lt;&lt; increment(x)
&lt;&lt; endl; </span><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">



      <span style="font-family: Courier New,Courier,monospace; font-weight: bold;">
&nbsp; &nbsp; cout &lt;&lt; x &lt;&lt; endl; </span><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">



      <br style="font-family: Courier New,Courier,monospace; font-weight: bold;">



      <span style="font-family: Courier New,Courier,monospace; font-weight: bold;">
&nbsp; &nbsp; return 0; </span><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">



      <span style="font-family: Courier New,Courier,monospace; font-weight: bold;">
} </span><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">



      <br style="font-family: Courier New,Courier,monospace; font-weight: bold;">



      <span style="font-family: Courier New,Courier,monospace; font-weight: bold;">
int increment(int n) { </span><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">



      <span style="font-family: Courier New,Courier,monospace; font-weight: bold;">
&nbsp; &nbsp; n = n + 1; </span><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">



      <span style="font-family: Courier New,Courier,monospace; font-weight: bold;">
&nbsp; &nbsp; return n; </span><br style="font-family: Courier New,Courier,monospace; font-weight: bold;">



      <span style="font-family: Courier New,Courier,monospace; font-weight: bold;">
}</span><br>



      </small></div>


      <small>
      <span style="font-style: italic;"><span style="font-weight: bold;"><br>



      </span></span>
在這個程式片段中，x將值傳遞給increment()函式的參數n，n雖然作了遞增運算，但是對x的儲存值並無影響，x最後仍是顯示10。 <br>



      <br>



在傳值應用上，您也可以將變數的記憶體位址值取出，傳遞給指定的指標參數，只要使用&amp;運算子就可以了。<br>



      </small>
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">int
main() { </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; int
x = 10; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; ....
      </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; cout
&lt;&lt; increment(&amp;x) &lt;&lt; endl; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; cout
&lt;&lt; x &lt;&lt; endl; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp;
return 0; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">}
      </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">int
increment(int
*n) { </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; *n =
*n + 1; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp;
return *n; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">}</span><br>



      </small></div>


      <small>
      <br>



在這個程式中，increment()上的參數n是個指標，在呼叫increment()函式時，您使用取址運算子&amp;將x變數的記憶體位
址取出並
傳遞給指標n，而在函式中，您使用取值運算子*取出這塊記憶體位址的值，並作遞增動作之後再指定回該記憶體位址，所以程式最後的x變數會顯示值11。 <br>



      <br>



在函式上宣告指標參數的目的，通常目的是若作為引數的變數值同一位址上，在函式中若有變動該位址上的值時，呼叫者也可以保留這份變動的結果，這可以解決一
個問題，在C++中我們在呼叫函式後只能傳回
（return）一個值，若在呼叫函式時，您希望能取得兩個以上的運算結果，就可以使用指標參數。<br>



      <br>



在 <a href="Reference.html">參考（Reference）</a>
中介紹過參考型態，參考型態最常使用於函式的參數列上，一個使用的例子如下：<br>



      </small>
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">int
main() { </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; int
x = 10; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; ....
      </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; cout
&lt;&lt; increment(x) &lt;&lt; "\n"; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; cout
&lt;&lt; x &lt;&lt; "\n"; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp;
return 0; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">}
      </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">int
increment(int
&amp;n) { </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; n =
n + 1; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp;
return n; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">



      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">}</span><br>



      </small></div>


      <small>
      <br>



在上面的程式片段中，您在increment()的參數列中使用參考宣告int&amp;，當呼叫increment()函式時，您不用使用
&amp;運
算子取得x變數的記憶體位址，n會自動參考至x變數的位址，由於x變數與n變數的記憶體位址是相同的，所以在increment()中的遞增動作，同樣會
影響x變數，所以程式最後x會顯示為11。 <br>



      <br>



傳參考使用的時機使在於您希望傳遞的參數，在函式中若有變動時，呼叫者也可以保留這份變動的結果，所以若在呼叫函式時，您希望能取得兩個以上的運算結果，
就可以使用傳址呼叫，另一個使用的時機則是在大型物件的傳遞，如果使用傳值呼叫，大型物件在複製時會佔用一塊大的記憶體，此時您可以使用傳參考，如果您不
想在函式中改變物件的話，而只想讓物件提供資訊，則可以加上const修飾，例如：<br>



      </small>
      
      
      <div style="margin-left: 40px; font-weight: bold; font-family: Courier New,Courier,monospace;"><small>void
someFunction(const SomeType &amp;some) {<br>



&nbsp; &nbsp; ....<br>



}
      </small></div>


      <small> </small></td>



      <td style="width: 250px; text-align: center; vertical-align: top;"><comment title=" adsense for content" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment>&nbsp;
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <comment title=" adsense for content end" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment><br>

      <comment title=" adsense for content" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment>
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->&#160;</script>&nbsp;
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js"></script><comment title=" adsense for content end" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment><br>

      <br>
      <center>
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
</script>
<script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<br>

      </center>

 </td>



    </tr>



  
  
  </tbody>
</table>



<br>


<br>



<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script>
</body>

<!-- Mirrored from openhome.cc/Gossip/CppGossip/PassBy.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:08:08 GMT -->
</html>
