<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<!-- Mirrored from openhome.cc/Gossip/CppGossip/string1.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:08:08 GMT -->
<head>





  
  
  
  
  <link rel="stylesheet" href="css/stdlayout.css" type="text/css">





  
  
  
  
  <link rel="stylesheet" href="css/print.css" type="text/css">





  
  
  
  
  <meta content="text/html; charset=Big5" http-equiv="content-type">




  
  
  
  
  <title>字元陣列（C-style 字串）</title>
</head>


<body>





<h3><a href="../index.html">From
Gossip@Openhome</a></h3>





<h1><a href="index.html">C++ Gossip:
字元陣列（C-style 字串）</a></h1>





<table style="text-align: left; width: 946px; height: 32px;" border="0" cellpadding="0" cellspacing="0">





  <tbody>





    <tr>





      <td style="width: 676px; vertical-align: top;"> <small>
在C++中字串的本質是由字元所組成的陣列，並在最後加上一個空（null）字元'\0'，例如下面這個程式就是一個"hello"字串的宣告：<br>




      </small>
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">char
str[] = {'h', 'e', 'l', 'l', 'o', '\0'};</span><br>





      </small></div>





      <small><br>





之後您可以直接使用str來代表該字串，例如在文字模式下輸出str字串：<br>




      </small>
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">cout
&lt;&lt; str &lt;&lt; endl;</span><br>





      </small></div>





      <small><br>





C++是使用空字元來識別一個字元陣列是否表示字串，像上例就可以用來表示一個字串"hello"，在C++中您也可以這麼宣告字串：<br>




      </small>
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">char
str[] = "hello";</span><br>





      </small></div>





      <small><br>





在這個例子中，雖然您沒有指定空字元'\0'，但是程式會自動加上空字元，而它基本上還是字元陣列，與前一個宣告方式是相同的，您從下面這個程式就可以知
道：</small> <br>





      <br>





      
      
      
      
      <pre>#include &lt;iostream&gt; <br>using namespace std; <br><br>int main() { <br>    char str[] = "hello"; <br><br>    for(int i = 0; i &lt; (sizeof(str)/sizeof(str[0])); i++) { <br>        if(str[i] == '\0') <br>            cout &lt;&lt; " null"; <br>        else <br>            cout &lt;&lt; " " &lt;&lt; str[i]; <br>    } <br>    cout &lt;&lt; endl; <br> <br>    return 0; <br>}</pre>





      <br>





      <small><span class="postbody">執行結果：</span></small><br>





      
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">





        <tbody>





          <tr>





            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">&nbsp;h e l l o null</span></small><span style="color: rgb(255, 255, 255);"><br>





            </span></td>





          </tr>





        
        
        
        
        </tbody>
      
      
      
      
      </table>





      <br>




      <small>
字串是字元陣列，所以您可以使用陣列的存取方式取出每一個字元，在指定"hello"時表面上雖然只有5個字元，但是最後會加上一個空字元'\0'，所以
str[]共使用了6個字元，由於字串的最後一個字元為空字元，所以您可以檢驗這個字元來看看字串是否為空，例如：<br>




      </small>
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">if(str[0]
== '\0') {</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; cout
&lt;&lt; "字串為空";</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">}</span><br>





      </small></div>





      <small><br>





空字元在作條件判斷時，會被視為0，所以上式還可以這麼寫：<br>




      </small>
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">if(
! str[0] ) {</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">&nbsp;
&nbsp; cout
&lt;&lt; "字串為空";</span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">}</span><br>





      </small></div>





      <small><br>





字串一但指定，它的長度就固定了，也就是字元陣列的長度，所以您由使用者輸入取得字串值時，需注意不要超過字串的長度；從使用者輸入取得字串值只要這麼作
就可以了： <br>




      </small>
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">char
str[80]; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">cout
&lt;&lt;
"輸入字串："; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">cin
&gt;&gt; str; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">cout
&lt;&lt;
"您輸入的字串為 " &lt;&lt; str &lt;&lt; endl;</span><br>





      </small></div>





      <small><br>





這個程式片段可以取得使用者的字串輸入，所輸入的字串長度不得超過80個字元，80個字元的上限包括空白字元，所以實際上可以輸入79個字元；如果輸入的
字元超出所宣告的上限，會發生不可預期的錯誤。 <br>




      <br>





要指定新的字串值給它時，您不能像下面的方式指定： <br>




      </small>

      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">char
str[80]; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">str
= "Just";</span><br>





      </small></div>





      <small><br>





而必須要一個字元一個字元的指定至陣列中，並在最後加上空白字元，例如： <br>




      </small>
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">char
str[80] = {'\0'}; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">str[0]
= 'J'; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">str[1]
= 'u'; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">str[2]
= 's'; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">str[3]
= 't'; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">str[4]
= '\0'; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">cout
&lt;&lt; str
&lt;&lt; endl;</span><br>





      </small></div>





      <small><br>





這樣的字元指定方式當然相當的不方便，所以C++提供了字串處理的相關函式，例如： <br>




      </small>
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">strcpy(str1,
str2);&nbsp; // str2字串複製給str1字串 </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">strcat(str1,
str2);&nbsp; // str2字串串接在str1字串後 </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">strlen(str);&nbsp;
// 計算不含空字元的字串長度 </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">strcmp(str1,
str2); // 比較兩個字串</span><br>





      </small></div>





      <small><br>





事實上這是從Standard C延續下來的字串處理函式，要使用這些函式，您要含入cstring或是string，例如：<br>




      </small>
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">#include
&lt;cstring&gt;</span><br>





      </small></div>





      <small><br>





下面這個程式是個簡單的示範：</small><br>





      <br>





      
      
      
      
      <pre>#include &lt;iostream&gt; <br>#include &lt;cstring&gt; <br>using namespace std; <br><br>int main() { <br>    char str1[80] = {'\0'}; <br>    char str2[] = "caterpillar"; <br><br>    cout &lt;&lt; "str1: " &lt;&lt; str1 &lt;&lt; endl<br>         &lt;&lt; "str2: " &lt;&lt; str2 &lt;&lt; endl<br>         &lt;&lt; endl; <br><br>    // 將str2複製給str1 <br>    strcpy(str1, str2); <br>    cout &lt;&lt; "str1: " &lt;&lt; str1 &lt;&lt; endl<br>         &lt;&lt; "str2: " &lt;&lt; str2 &lt;&lt; endl<br>         &lt;&lt; endl;<br><br>    // 將str2接在str1後 <br>    strcat(str1, str2); <br>    cout &lt;&lt; "str1: " &lt;&lt; str1 &lt;&lt; endl<br>         &lt;&lt; "str2: " &lt;&lt; str2 &lt;&lt; endl<br>         &lt;&lt; endl;<br><br>    cout &lt;&lt; "str1長度：" &lt;&lt; strlen(str1) &lt;&lt; endl<br>         &lt;&lt; "str2長度：" &lt;&lt; strlen(str2) &lt;&lt; endl<br>         &lt;&lt; endl;<br><br>    cout &lt;&lt; "str1與str2比較：" &lt;&lt; strcmp(str1, str2) &lt;&lt; endl<br>         &lt;&lt; endl;<br> <br>    return 0; <br>}<br></pre>





      <br>





      <small><span class="postbody">
執行結果：</span></small><br>





      
      
      
      
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">





        <tbody>





          <tr>





            <td style="background-color: rgb(0, 0, 0);"><small><span style="color: rgb(255, 255, 255);">str1:<br>





str2: caterpillar<br>





            <br>





str1: caterpillar<br>





str2: caterpillar<br>





            <br>





str1: caterpillarcaterpillar<br>





str2: caterpillar<br>





            <br>





str1長度：22<br>





str2長度：11<br>





            <br>





str1與str2比較：1</span></small><span style="color: rgb(255, 255, 255);"><br>





            </span></td>





          </tr>





        
        
        
        
        </tbody>
      
      
      
      
      </table>





      <br>




      <small>
strcmp(str1,
str2)會比較字串str1與str2的大小，若相同就傳回0，str1大於str2則傳回大於0的值，小於則傳回小於0的值，比較的標準是依字典順序
比對，例如若str1大於str2，表示str1在字典中的順序是在str2之後；strlen()所傳回的字串長度值並不包括空字元，這點必須注意。
      <br>




      <br>





如果您使用cin來取得使用者的輸入字串，則您會發現輸入字串時中間不能包括空白，如果您想要在輸入字串時包括空白，您必須使用gets()函式，例如：
      <br>




      </small>

      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace;">char
str[80]; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">cout
&lt;&lt;
"輸入字串："; </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">gets(str);
      </span><br style="font-weight: bold; font-family: Courier New,Courier,monospace;">





      <span style="font-weight: bold; font-family: Courier New,Courier,monospace;">cout
&lt;&lt;
"輸入的字串：" &lt;&lt; str &lt;&lt; endl;</span><br>





      </small></div>





      <small><br>





使用gets()函式時有一點必須注意，就是它並不會檢查使用者的輸入是否超出字元陣列的長度，使用時必須小心，有的編譯器會提示警告訊息。 <br>




      </small>
      
      
      
      
      <div style="margin-left: 40px;"><small><span style="font-weight: bold; font-family: Courier New,Courier,monospace; color: rgb(255, 0, 0);">:
the `gets' function
is dangerous and should not be used.</span><br>





      </small></div>





      <small><br>





字串的宣告還有指標（Pointer）的宣告方式，這個留待談到指標時再來說明。</small> </td>





      <td style="width: 250px; text-align: center; vertical-align: top;"><comment title=" adsense for content" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment>&nbsp;
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <comment title=" adsense for content end" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment><br>

      <comment title=" adsense for content" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment>
      <script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->&#160;</script>&nbsp;
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js"></script><comment title=" adsense for content end" xmlns="http://disruptive-innovations.com/zoo/nvu"></comment><br>

      <br><script type="text/javascript"><!--
google_ad_client = "pub-9750319131714390";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
//-->
      </script>
      <script type="text/javascript" src="../../../pagead2.googlesyndication.com/pagead/show_ads.js">
      </script><br>

      <br>
      <center>
       <br>

      </center>

 </td>





    </tr>





  
  
  
  
  </tbody>
</table>





<br>




<br>





<script src="../../../www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-143766-1";
urchinTracker();
</script>
</body>

<!-- Mirrored from openhome.cc/Gossip/CppGossip/string1.html by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 28 Jul 2013 09:08:08 GMT -->
</html>
